<!DOCTYPE html> 
<html> 
<head> 	
		<link rel="canonical" href="https://niallzato.github.io/differentpage" />
		  <title>A Title</title>

    </head> 
<body> 
<!--	
<iframe src="https://player.vimeo.com/video/76979871" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
<script src="https://player.vimeo.com/api/player.js"></script>
-->
<!-- OneTrust Cookies Consent Notice start for niallzato.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"  type="text/javascript" charset="UTF-8" data-domain-script="0190ef4a-3588-7a7c-8423-08ff1b2d6c7c" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for niallzato.github.io -->

<script src="https://cdn.jsdelivr.net/npm/@segment/analytics-consent-wrapper-onetrust@latest/dist/umd/analytics-onetrust.umd.js"></script>

<!--
  Add / Modify Segment Analytics Snippet
  * Find and replace: analytics.load('<MY_WRITE_KEY'>) -> withOneTrust(analytics).load('<MY_WRITE_KEY'>)
-->
<script>
  !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="9YlYQqs0rvHp5yLr8foZZGumJLgh8zez";;analytics.SNIPPET_VERSION="5.2.0";
  //analytics.load("9YlYQqs0rvHp5yLr8foZZGumJLgh8zez");
	withOneTrust(analytics).load('9YlYQqs0rvHp5yLr8foZZGumJLgh8zez')
  analytics.page();
  }}();
</script>
<script>
 // analytics.ready(function() {
 //    var oldID= '1d5cf022170856e315944f873e1ec055';
 //    var iframe = document.querySelector('iframe');
 //    var player = new Vimeo.Player(iframe);
 //    var VimeoAnalytics = window.analytics.plugins.VimeoAnalytics
 //    var vimeoAnalytics = new VimeoAnalytics(player, '1d5cf022170856e315944f873e1ec055')
 //    vimeoAnalytics.initialize()	
 //  });
// 	var counter = 1;
// 	const interval = setInterval(function() {
// 	//analytics.track("in loop:"+counter);
// 	counter++;	
// 	}, 1000);
	
var myanon;	
	
exponentialBackoff(segmentReady, 10, 100, function(result) {
    console.log('the result is',result);
});

// A function that keeps trying, "toTry" until it returns true or has
// tried "max" number of times. First retry has a delay of "delay".
// "callback" is called upon success.
function exponentialBackoff(toTry, max, delay, callback) {
    console.log('max',max,'next delay',delay);
    var result = toTry();
    console.log(result);
    if (result) {
	myanon = analytics.user().anonymousId();
        callback(result);
    } else {
        if (max > 0) {
            setTimeout(function() {
                exponentialBackoff(toTry, --max, delay * 2, callback);
            }, delay);

        } else {
             console.log('we give up');   
        }
    }
}

function segmentReady() {
    return typeof analytics.user === 'function'
}
		
</script>
	
    <div id="target-container">
    </div>
	
	<div id="player"></div>

    <script>
//       // 2. This code loads the IFrame Player API code asynchronously.
//       var tag = document.createElement('script');

//       tag.src = "https://www.youtube.com/iframe_api";
//       var firstScriptTag = document.getElementsByTagName('script')[0];
//       firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

//       // 3. This function creates an <iframe> (and YouTube player)
//       //    after the API code downloads.
// 	var player;
//       function onYouTubeIframeAPIReady() {
//               player = new YT.Player('player', {
//               height: '390',
//               width: '640',
//               videoId: 'M7lc1UVf-VE'
//         });
// 	      analytics.ready(function () {
// 	    var ytAnalytics = new window.analytics.plugins.YouTubeAnalytics(player, 'XXXXXXXXXXXXXXXXXXXXXXXXXXXX0365')
// 	   ytAnalytics.initialize()
//       })}
	    
    </script>

    <h2>User Identification Form</h2>
    <form onsubmit="return identifyUser()">
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email"><br><br>
	<label for="phone">Phone:</label><br>
	<input type="text" id="phone" name="phone"><br>
        <input type="submit" value="Identify User">
    </form>
	    
<h2>Segment Button Click Tracking Example</h2>
<!-- Button you want to track -->
<button id="trackButton">Click Me</button>

<script type="text/javascript">
	        function identifyUser() {
            var userId = document.getElementById('userId').value;
            if (userId) {
                analytics.identify(userId, {
                    // Add any additional traits here
                    email: document.getElementById('email').value,
		    phone: document.getElementById('phone').value

                });
            } else {
                analytics.identify({
                    // Add any additional traits here
                    email: document.getElementById('email').value,
		    phone: document.getElementById('phone').value
                });
	    }
            // Prevent form submission for demonstration purposes
            return false;
        }
    // JavaScript to track button click
    document.getElementById('trackButton').addEventListener('click', function() {
        analytics.track('Button Clicked', {
            category: 'Engagement',
            label: 'Track Button',
            value: 1
        });
    });
</script>
	        	    
		    
    </body> 
</html>
